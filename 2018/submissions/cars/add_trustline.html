<!DOCTYPE html>
<html>
    <head>
        
        <title> Gwiza | Login </title>
        
        <meta charset="UTF-8">
        <meta name="description" content="Gwiza" />
        <meta name="keywords" content="Gwiza" />
        <meta name="author" content="Gwiza" />
        <meta content="width=device-width, initial-scale=1" name="viewport"/>
        
        <!-- PLUGIN CSS -->
        <link href="https://fonts.googleapis.com/css?family=Montserrat:300,300i,400,400i,500,500i,600,600i,700,700i|Open+Sans:300,300i,400,400i,600,600i,700,700i" rel="stylesheet">
        <link href="assets/plugins/uniform/css/uniform.default.min.css" rel="stylesheet"/>
        <link href="assets/plugins/bootstrap/css/bootstrap.min.css" rel="stylesheet" type="text/css"/>
        <link href="assets/plugins/fontawesome/css/font-awesome.css" rel="stylesheet" type="text/css"/>
        <link href="assets/plugins/line-icons/simple-line-icons.css" rel="stylesheet" type="text/css"/>
        <link href="assets/plugins/waves/waves.min.css" rel="stylesheet" type="text/css"/>	
        <link href="assets/plugins/metrojs/MetroJs.min.css" rel="stylesheet" type="text/css"/>	
        <link href="assets/plugins/toastr/toastr.min.css" rel="stylesheet" type="text/css"/> 
        <link href="assets/plugins/datatables/css/jquery.datatables.min.css" rel="stylesheet" type="text/css"/>	
        <link href="assets/plugins/datatables/css/jquery.datatables_themeroller.css" rel="stylesheet" type="text/css"/>
        <link href="assets/plugins/bootstrap-datepicker/css/datepicker3.css" rel="stylesheet" type="text/css"/>
		<link href="assets/plugins/bootstrap-tagsinput/bootstrap-tagsinput.css" rel="stylesheet" type="text/css"/>
        <link href="assets/plugins/bootstrap-timepicker/css/bootstrap-timepicker.min.css" rel="stylesheet" type="text/css"/>         	
        	
        <!-- APPLICATION CSS -->
        <link href="assets/css/dashboard.min.css" rel="stylesheet" type="text/css"/>
        <link href="assets/css/custom.css" rel="stylesheet" type="text/css"/>
        
        <!--[if lt IE 9]>
        	<script src="https://oss.maxcdn.com/html5shiv/3.7.2/html5shiv.min.js"></script>
        	<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
        <![endif]-->
        
    </head>
    <body class="page-login">
        <main class="page-content" style="float:left">
            <div class="page-inner">
                <div id="main-wrapper">
                	<div class="login-wrapper">
                    	<div class="login-flip">
                            <div class="row">
                                <div class="col-md-12">
                                    <div class="login-box lgn-box">
                                        <a href="index.html" class="logo-name text-lg text-center">
                                        	<span> Add Trustline</span>
                                        </a>
                                        <p class="text-center">Please Add trustline </p>
                                        <form class="m-t-md" action="index.html">
                                            <div class="form-group">
                                                <input type="email" class="form-control input-lg m-b-sm lg-input" placeholder="Code" required>
                                            </div>
                                            <div class="form-group">
                                                <input type="password" class="form-control input-lg m-b-sm lg-input" placeholder="name" required>
                                            </div>
                                            <!-- <div class="form-group forgotten">
                                            	<a href="forgot.html" class="display-block m-t-md text-sm">Forgot your password?</a>
                                            </div> -->
                                            <button type="submit" class="btn btn-success m-b-sm btn-block btn-lg lg-btn" onclick="changeTrust">Add trustline</button>
                                        </form>
                                        <!-- <p class="text-center m-t-xs text-sm">&copy; 2017 Copyright Gwiza</p> -->
                                    </div>
                                </div>
                            </div><!-- Row -->
                        </div><!-- login-flip -->
                        <!-- <div class="form-foo">
                        	<a href="signup.html"> Don't have an account? <span>Sign up</span> </a>
                        </div> -->
                    </div><!-- login-wrapper -->
                </div><!-- Main Wrapper -->
            </div><!-- Page Inner -->
        </main><!-- Page Content -->
        
        <!-- PLUGIN JS -->
        <script src="assets/plugins/jquery/jquery-2.1.4.min.js"></script>
        <script src="assets/plugins/jquery-ui/jquery-ui.min.js"></script>
        <script src="assets/plugins/jquery-blockui/jquery.blockui.js"></script>
        <script src="assets/plugins/bootstrap/js/bootstrap.min.js"></script>
        <script src="assets/plugins/jquery-slimscroll/jquery.slimscroll.min.js"></script>
        <script src="assets/plugins/uniform/jquery.uniform.min.js"></script>
        <script src="assets/plugins/waves/waves.min.js"></script>
        <script src="assets/plugins/waypoints/jquery.waypoints.min.js"></script>
        <script src="assets/plugins/jquery-counterup/jquery.counterup.min.js"></script>
        <script src="assets/plugins/toastr/toastr.min.js"></script>
        <script src="assets/plugins/flot/jquery.flot.min.js"></script>
        <script src="assets/plugins/flot/jquery.flot.time.min.js"></script>
        <script src="assets/plugins/flot/jquery.flot.symbol.min.js"></script>
        <script src="assets/plugins/flot/jquery.flot.resize.min.js"></script>
        <script src="assets/plugins/flot/jquery.flot.tooltip.min.js"></script>
        <script src="assets/plugins/curvedlines/curvedLines.js"></script>
        <script src="assets/plugins/metrojs/MetroJs.min.js"></script>
        <script src="assets/plugins/moment/moment.js"></script>
        <script src="assets/plugins/datatables/js/jquery.datatables.min.js"></script>
        <script src="assets/plugins/bootstrap-datepicker/js/bootstrap-datepicker.js"></script>
        <script src="assets/plugins/bootstrap-tagsinput/bootstrap-tagsinput.min.js"></script>
        <script src="assets/plugins/bootstrap-timepicker/js/bootstrap-timepicker.min.js"></script> 
        
        <!-- APPLICATION JS -->       
        <script src="assets/js/dashboard.js"></script>
        <script src="assets/js/custom.js"></script>
        <script> src="assets.js"</script>
        <!-- <script src="sdk.js"></script> -->

        <script>

import {Asset} from "./asset";
// import {default as xdr} from "../generated/stellar-xdr_generated";
// import {Keypair} from "../keypair";
// import isUndefined from 'lodash/isUndefined';
// import {Hyper} from "js-xdr";
// import BigNumber from 'bignumber.js';
const MAX_INT64 = '9223372036854775807';
/**
 * Returns an XDR ChangeTrustOp. A "change trust" operation adds, removes, or updates a
 * trust line for a given asset from the source account to another. The issuer being
 * trusted and the asset code are in the given Asset object.
 * @function
 * @alias Operation.changeTrust
 * @param {object} opts
 * @param {Asset} opts.asset - The asset for the trust line.
 * @param {string} [opts.limit] - The limit for the asset, defaults to max int64.
 *                                If the limit is set to "0" it deletes the trustline.
 * @param {string} [opts.source] - The source account (defaults to transaction source).
 * @returns {xdr.ChangeTrustOp}
 */


opts = new Asset("carsvendor","GC2W3PQV6W5JSVZ2EP5ALFJE3PA3KHPBW6IEG47KDOZ35QYCDWCHHIFM")
// export 
const changeTrust = function(opts) {
  let attributes      = {};
  attributes.line     = opts.asset.toXDRObject();
  if (!isUndefined(opts.limit) && !this.isValidAmount(opts.limit, true)) {
    throw new TypeError(this.constructAmountRequirementsError('limit'));
  }
  if (opts.limit) {
    attributes.limit = this._toXDRAmount(opts.limit);
    console.log(attributes.limit)
  } else {
    attributes.limit = Hyper.fromString(new BigNumber(MAX_INT64).toString());
    console.log(attributes.limit)
  }
  if (opts.source) {
    attributes.source = opts.source.masterKeypair;
    console.log(attributes)
  }
  let changeTrustOP = new xdr.ChangeTrustOp(attributes);
  
  let opAttributes = {};
  opAttributes.body = xdr.OperationBody.changeTrust(changeTrustOP);
  this.setSourceAccount(opAttributes, opts);
  return new xdr.Operation(opAttributes);
};
        </script>
    </body>
</html>